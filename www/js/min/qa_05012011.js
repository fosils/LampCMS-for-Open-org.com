var oSL={Regform:function(){}};var $Y=YAHOO,$D=YAHOO.util.Dom,$C=$D.getElementsByClassName,$CONN=YAHOO.util.Connect,$=YAHOO.util.Dom.get,$LANG=YAHOO.lang,$COOKIE=YAHOO.util.Cookie,$J=YAHOO.lang.JSON,$W=YAHOO.widget,$L=YAHOO.log;LampcmsException=function(b,a){this.message=b;this.name=a||"LampcmsException"};oAjaxObject={handleSuccess:function(a){var i,k,j,h,b,f="",d=$("loginHead"),c=$LANG.trim(a.getResponseHeader["Content-Type"]);switch(c){case"text/json; charset=UTF-8":case"text/javascript; charset=UTF-8":try{k=$J.parse(a.responseText)}catch(g){alert("Invalid json data in responceText "+$LANG.dump(g)+" strContentType "+c+"<br>oRespnose: "+$LANG.dump(a.responseText))}switch(true){case k.hasOwnProperty("exception"):alert(k.exception);break;case k.hasOwnProperty("redirect"):window.location.assign(k.redirect);break;case k.hasOwnProperty("message"):d.innerHTML=k.message;oSL.fColorChange(d,"#00FF00","#FFFFFF");break;case k.hasOwnProperty("quickreg"):i=document.createElement("div");i.innerHTML=k.quickreg;document.body.appendChild(i);oSL.Regform.getInstance().show();break}break}},handleFailure:function(a){alert($LANG.dump(a))}};oSL={toString:function(){return"object oSL"},getQuickRegForm:function(){if(oSL.Regform&&oSL.Regform.hasDialog()){oSL.Regform.getInstance().show()}else{$CONN.asyncRequest("GET","/index.php?a=getregform",oSL.oCallback)}},hideRegForm:function(){if(oSL.Regform){oSL.Regform.getInstance().hide();window.location.reload()}return false},getMeta:function(e,c){$L("182 looking for meta tag "+e);var d,b,a=document.getElementsByTagName("meta");$L("43 "+$LANG.dump(a)+" total metas: "+a.length);if(!a){$L("45 no meta tags in document","error");return false}for(b=0;b<a.length;b+=1){if(a[b].name&&(a[b].name===e)&&a[b].content){if(c){d=a[b];$L("213 meta tag element "+d);return d}return a[b].content}}return false},getToken:function(){$L("166 getToken");var a=this.getMeta("version_id");return a},isLoggedIn:function(){$L("64 this is: "+this);var a,b=this.getMeta("session-uid");$L("148 uid: "+b);a=(b&&(b!=="")&&(b!=="0"));$L("66 ret: "+a);return a},getTZO:function(){var b,a=new Date();b=(0-(a.getTimezoneOffset()*60));return b},setTZOCookie:function(){$L("109 this is: "+this);var a=this.getTZO();$L("117 tzo: "+a);$COOKIE.set("tzo",a,{path:"/"})},oCallback:{success:oAjaxObject.handleSuccess,failure:oAjaxObject.handleFailure,scope:oAjaxObject},fAddIcon:function(d,a){var c=(typeof(d)==="string")?$(d):d;if(!this.eLoader){this.eLoader=document.createElement("img");this.eLoader.src="/images/ajax-loader.gif";this.eLoader.id="loadericon"}if(this.eLoader){if(a&&a===true){c.innerHTML=""}c.appendChild(this.eLoader)}},fRemoveIcon:function(){if(this.eLoader&&this.eLoader.parentNode){$L("include.js 118 eLoader parent: "+this.eLoader.parentNode+" id: "+this.eLoader.parentNode.id);this.eLoader.parentNode.removeChild(this.eLoader)}},fCompareForms:function(a,b){$L($CONN.setForm(a));$L($CONN.setForm(b));if($CONN.setForm(a)===$CONN.setForm(b)){return true}return false},fColorChange:function(e,g,d){$L("starting fColorChange for "+e);var a,b,f,c=(typeof e==="string")?$(e):e,d=(d&&typeof d==="string")?d:"#FF0000",g=(g&&typeof g==="string")?g:"#FFFFFF";$L("element is: "+c);if(c){b=$D.getStyle(c,"background-color");$D.setStyle(c,"background-color",g);a=new YAHOO.util.ColorAnim(c,{backgroundColor:{to:d}});f=function(){c.style.backgroundColor=b};a.onComplete.subscribe(f);a.animate()}},fParseQf:function(j){$L($LANG.dump(j));var f="",g,e=0,b,h,c=$("qfe");switch(true){case j.hasOwnProperty("exception"):if(j.hasOwnProperty("errHeader")){f+="<u>"+j.errHeader+"</u><br>"}c.innerHTML='<div id="qfErrors">'+f+j.exception+"</div>";break;case j.hasOwnProperty("errors"):if(j.hasOwnProperty("errHeader")){f+="<u>"+j.errors.errHeader+"</u><br>"}c.innerHTML='<div id="qfErrors">'+f+j.errors.errMessage+"</div>";this.aEls=[];for(h in j){if(j.hasOwnProperty(h)&&j[h].hasOwnProperty("err")){b=$("a"+h);if(b){b.style.backgroundColor="#FFFFCC";this.aEls.push(b)}}}this.fColorChange("qfmessage","#FF0000","#FFFFFF");break}if(oSL.oFrm&&oSL.oFrm.elBtnSubmit){oSL.oFrm.elBtnSubmit.disabled=false}var d=$("progressBar"),a=$("aavatar");if(d){d.parentNode.removeChild(d)}if(a){$D.setStyle(a,"display","block")}}};oSL.tweet=(function(){var c;var b=oSL.getMeta("site_title");var d=oSL.getMeta("site_url");var a=oSL.getToken();return{getInstance:function(){var g,f,h,e;if(!c){if(!$("dialog1")){e='<div class="hd">Please enter your information</div><div class="bd"><hr/><form method="POST" action="/index.php"><input type="hidden" name="a" value="tweet"><input type="hidden" name="token" value="'+a+'"><h3 class="tweetdlg">Tweet this:</h3><div class="clear"></div><textarea cols="44" rows="5" name="tweet">'+$("twinvite").title+" "+b+" "+d+'</textarea><div class="clear"></div></form>';g=document.createElement("div");g.id="dialog1";document.body.appendChild(g);g.innerHTML=e}c=new $W.Dialog("dialog1",{width:"30em",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Submit",handler:function(){this.submit()},isDefault:true},{text:"Cancel",handler:function(){this.cancel()}}]});c.beforeSubmitEvent.subscribe(function(){$L("before submit tweet")});c.callback={success:function(i){alert("Tweet sent")},failure:function(i){alert("Tweet not sent")}};c.setHeader("Invite Your Friends");c.render(document.body)}return c},destroy:function(){if(c){c.destroy()}},hide:function(){if(c){c.hide()}},setTextArea:function(e){},toString:function(){return"object oDialog created with oSL.dialog()"}}})();oSL.Regform=(function(){var f,k,e={},d,c=function(){this.submit()},j=function(){$L("41 clicked on Cancel this is: "+this);oSL.Regform.getPrompt().show()},h=function(){this.hide()},l=function(){var n=$("regext");$L("handling exit");this.hide();oSL.Regform.getInstance().hide();if(n){$COOKIE.set("dnd","1",{path:"/"})}},b=function(s){var n,p,t,r=oSL.Regform.getInstance();oSL.Regform.enableButtons();t=oSL.Regform.getInstance().getButtons();for(p=0;p<t.length;p+=1){$L("button "+p+" is "+t[p])}n=s.responseText;try{json=$J.parse(s.responseText);switch(true){case (json.hasOwnProperty("exception")):a(json);break;case (json.hasOwnProperty("action")&&(json.action==="done")):r.setHeader("Welcome!");r.setFooter("");r.setBody(json.body);break}}catch(q){alert("Invalid json data in responceText "+$LANG.dump(q)+"Respnose: "+$LANG.dump(s.responseText))}},g=function(n){oSL.Regform.enableButtons();oSL.Regform.getInstance().setBody("<p>boo hoo, something is wrong</p>");$L("47 fail ","warn")},a=function(t){var o,r=$("form_error"),s,q=t.exception,n=oSL.Regform.getInstance(),p=n.form;r.innerHTML=q;oSL.fColorChange(r,"#FFFFFF","#FF0000");if(t.type&&("LampcmsCaptchaLimitException"===t.type)){$LANG.later(2000,n,"destroy")}if(t.hasOwnProperty("fields")){s=t.fields;for(o=0;o<s.length;o+=1){if(p.hasOwnProperty(s[o])){p[s[o]].style.backgroundColor="#CCFFCC"}}}if(t.hasOwnProperty("captcha")){if(t.captcha.public_key&&t.captcha.hncaptcha&&t.captcha.img){p.public_key.value=t.captcha.public_key;p.private_key.value="";p.hncaptcha.value=t.captcha.hncaptcha;$("imgcaptcha").innerHTML=t.captcha.img}}else{if(p.private_key&&t.type){p.private_key.disabled=true}}},i=[{text:"<-- Return to page",handler:function(){alert("this is "+this)},isDefault:true},{text:"Go to Profile editor -->",handler:function(){alert("go to profile")}}],m=function(n){oSL.Regform.disableButtons()};return{getInstance:function(){$L("cp 13","warn");if(!k){$L("cp 15","warn");$D.removeClass("regdiv","yui-pe-content");$L("cp 17","warn");k=new $W.Dialog("regdiv",{width:"50em",fixedcenter:"contained",visible:false,constraintoviewport:false,hideaftersubmit:false,draggable:true,close:false,modal:true,buttons:[{text:"Create Your Account",handler:c,isDefault:true},{text:"Cancel",handler:j}]});k.callback={success:b,failure:g};k.validate=function(){var n,o,t,q,u=[],p=this.form,s=new Date(),r=this.getData();$L("data: "+$LANG.dump(r));t=(0-(s.getTimezoneOffset()*60));if((p.tzo)&&(t)){p.tzo.value=t}o=function(A){var v="@",w=".",z=A.indexOf(v),x=A.length,y=A.indexOf(w);if(A.indexOf(v)===-1||A.indexOf(v)===0||A.indexOf(v)===x){return false}if(A.indexOf(w)===-1||A.indexOf(w)===0||A.indexOf(w)===x){return false}if(A.substring(z-1,z)===w||A.substring(z+1,z+2)===w){return false}if((A.indexOf(v)===-1)||(A.indexOf(v,(z+1))!==-1)||(A.indexOf(w,(z+2))===-1)||(A.indexOf(" ")!==-1)){return false}return true};switch(true){case (r.email===""):q="Please enter email address";u.push("email");break;case (r.username===""):q="Please enter Username";u.push("username");break;case (r.hasOwnProperty("private_key")&&(""===r.private_key)):q="Please enter the text from image";u.push("private_key");break;case (!o(r.email)):q="Email address appears to be invalid<br>Please enter a valid Email";u.push("email");break;default:return true}a({exception:q,fields:u});return false};k.asyncSubmitEvent.subscribe(function(p,n){var o=n[0];m()});k.render($("lastdiv"))}return k},toString:function(){return"object oSL.Regform"},getPrompt:function(){if(!d){$L("making prompt");d=new $W.SimpleDialog("simpledialog1",{width:"300px",fixedcenter:true,zindex:99,visible:false,draggable:false,close:true,modal:true,text:"Do you want to continue?",icon:$W.SimpleDialog.ICON_ALARM,constraintoviewport:true,buttons:[{text:"Continue registration",handler:h,isDefault:true},{text:"Exit registration",handler:l}],effect:[{effect:$W.ContainerEffect.FADE,duration:0.2}]});d.setHeader("Are you sure?");d.render(document.body)}$L("176 oPrompt: "+d,"warn");return d},disableButtons:function(){var o,n;$L("105 this is: "+this,"warn");if(k){n=k.getButtons();for(o=0;o<n.length;o+=1){n[o].set("disabled",true)}}},enableButtons:function(){var o,n;$L("105 this is: "+this,"warn");if(k){n=k.getButtons();for(o=0;o<n.length;o+=1){n[o].set("disabled",false)}}},setButtonsDone:function(){k.cfg.queueProperty("buttons",i)},destroy:function(){if(k){k.destroy()}},hasDialog:function(){if(k&&k.body){return true}return false}}})();YUI({maxURLLength:1999}).use("node","dump","event","escape","gallery-storage-lite","gallery-overlay-extras","dd-plugin","anim","transition","yui2-container","yui2-editor","yui2-element","yui2-button","yui2-resize","yui2-animation","io-base","io-form","io-upload-iframe","json","jsonp","imageloader","autocomplete","autocomplete-filters","autocomplete-highlighters","gallery-node-tokeninput","cookie","cateditor",function(an,a0){var X=an.YUI2,az=an.all(".ttt2"),p,U,ac={},H,d,aU,aX,ax,aR,i,ad,aq,aT,h,t,g,ak,S,ao,y,aV,T,M,al={},aL,ab,aQ,aC,j,m,r,ah,B,aK,aM,I={},aa,G,ae=false,V=an.one("#body_preview"),aS=function(a4){var Y=new Date();a4+=" :: "+Y.toTimeString();if(V){V.set("innerHTML",a4)}},w='<div id="comm_wrap_{divID}" class="fl cb{extraClass}"><form action="/index.php" id="add-comment-{formID}" class="comform" method="post"><input type="hidden" name="a" value="addcomment"><input type="hidden" name="rid" value="{resID}"><input type="hidden" name="parentid" value="{parentID}"><input type="hidden" name="token" value="{token}"><table class="cb fr tbl_comment"><tr><td width="60px" class="com_icons" valign="top"></td><td class="com_main"><textarea name="com_body" cols="60" rows="3" class="com_bo" style="display: block; padding: 2px;"></textarea></td><td class="com_button" valign="top"><input type="submit" name="doit" class="btn_comment" value="{comment}"></td></tr>{commentTip}</table></form></div>',a2=function(){an.StorageLite.on("storage-lite:ready",function(){var Y,a4=Q.saveHTML();b();ai();an.StorageLite.setItem(A(),a4);aS("Draft saved..")})},ar='<tr><td></td><td colspan="2" class="lighttext">Enter at least 16 characters<br>Allowed mini-Markdown formatting: _italic_ and **bold**</td></tr>',z=an.one(".qa_form"),n,af,K=null,O=1,aA,s,aI,E,c,au,P={},Q,L,aE=[],A=function(){var Y;if(!z){return null}return z.get("name")},W=function(a4){an.Plugin.TokenInput.prototype._afterBlur=function(a6){var a5=this;if(this.get("tokenizeOnBlur")){setTimeout(function(){a5._tokenizeValue(null,null,{all:true})},100)}};var Y=(a4)?a4:an.one("#id_tags");if(Y){an.log("got id_tags");an.one(Y).plug(an.Plugin.TokenInput,{delimiter:" "});Y._node.value="";an.one(Y).plug(an.Plugin.AutoComplete,{resultListLocator:"ac",resultTextLocator:"tag",resultFilters:"charMatch",resultHighlighter:"charMatch",source:"/index.php?a=taghint&q={query}&ajaxid=1&callback={callback}"})}},f=function(a6){var a5,Y,a4=/(\<em>|\<\/em>)/g;a5=/(\<strong>|\<\/strong>)/g;Y=a6.replace(a4,"_");Y=Y.replace(a5,"**");return Y},aG=function(){var Y=this.currentElement[0];Y=new an.Node(Y);if(Y&&Y.hasClass("yui-media")){Y.remove()}an.one("#embed_url").set("value","");an.Event.purgeElement("#btn_addvideo");this.nodeChange()},a3=function(a7){var a4,a5=0,a6={},Y=["source","protocol","authority","domain","port","path","directoryPath","fileName","query","anchor"];a4=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?").exec(a7);for(a5=0;a5<10;a5++){a6[Y[a5]]=(a4[a5]?a4[a5]:"")}if(a6.directoryPath.length>0){a6.directoryPath=a6.directoryPath.replace(/\/?$/,"/")}return a6},x=function(a5){var a4,a7,a8,Y=a3(a5),a6=/(?:v=)([^&\?]*)(?:[&]*)/gi;a8=Y.path;an.log("1186 path: "+a8);if(a8.length<2||(-1===a8.indexOf("/"))){return false}a8=a8.substr(1);an.log("1192 path: "+a8);if("watch"!==a8){if(/(\?|&)/.test(a8)){an.log("path contains &?");return false}return a8}else{if(!Y.hasOwnProperty("query")||!Y.query||Y.query.length<3){an.log('no "query"');return false}else{a4=a6.exec(Y.query);if(!a4||a4.length<2||a4[1].length<1){an.log("1212 unable to extract");return false}an.log("1219 got vidID: "+a4[1]);return a4[1]}}},av=function(){var a4,a6="http://gdata.youtube.com/feeds/api/videos/{id}?v=2&alt=jsonc&callback=",a7,Y,a5=(an.one("#embed_url"))?an.one("#embed_url").get("value"):null;a7=function(bb){var a8=Q._getDoc(),ba,bd,a9,bg="",bf="",bc="Error returned from Youtube API. ",be='<a href="http://youtu.be/{id}" class="ajax ytlink ttt" rev="{id}" title="{t}"><img src="http://i.ytimg.com/vi/{id}/default.jpg" alt="YouTube video" width="120px" height="90px"/></a>';be+='<a href="http://youtu.be/{id}" class="ajax ytplay ttt" rev="{id}" title="{t}"><img src="/images/play.png" alt="Play" width="44px" height="44px"/></a>';if(bb.error){if(bb.error["message"]){bc+=bb.error["message"];alert(bc);return}}else{a9=bb.data["id"];if(bb.data&&bb.data.title){bg=bb.data.title}if(bb.data&&bb.data.description){bf=bb.data.description}ba=Q._swapEl(Q.currentElement[0],"div",function(bh){X.util.Dom.addClass(bh,"ajax");X.util.Dom.addClass(bh,"ytvideo");X.util.Dom.setStyle(bh,"width","120px");X.util.Dom.setStyle(bh,"height","90px");X.util.Dom.setStyle(bh,"min-height","90px");X.util.Dom.setStyle(bh,"margin-bottom","5px")});bd=an.Lang.sub(be,{id:a9,t:bg});ba.innerHTML=bd;ba.parentNode.appendChild(a8.createElement("br"));Q.focus();Q.closeWindow();Q.get("panel").syncIframe()}};if(a5&&""!==a5){Y=x(a5);if(false===Y){alert("URL of YouTube Video does not look correct");return}a4=an.Lang.sub(a6,{id:Y});a4+="{callback}";an.jsonp(a4,a7)}},ay=function(){var Y,a4=new X.widget.EditorWindow("insertmedia",{width:"415px"});a4.setHeader("Add YouTube Video");this.openWindow(a4);an.on("click",av,"#btn_addvideo");this.on("afterOpenWindow",function(){this.get("panel").syncIframe()},this,true)},Z=function(a6){var a5,Y,a4=/(\<em>|\<\/em>)/g;a5=/(\<strong>|\<\/strong>)/g;Y=a6.replace(a4,"_");Y=Y.replace("/(**)([^*]+)(**)/g","<strong>\\2</strong>");return Y},aN=function(a4){var Y;if(!P.hasOwnProperty(a4)){P[a4]=1}else{P[a4]=(P[a4]+1)}Y=(P[a4]<5);return Y},R=function(){var a4,Y=new Date();a4=(0-(Y.getTimezoneOffset()*60));return a4},J=function(a7,a9){var a8,a6,a4=(a9)?a9:"Loading...",a5,Y;if(!H){H=new an.Overlay({centered:true,srcNode:"#loading",width:"100px",headerContent:"Loading...",bodyContent:"<img src='/images/loading-bar.gif'>",zIndex:1000});an.one("#loading").removeClass("hidden");H.render()}H.set("headerContent",a4);if(a7&&(a7 instanceof an.Node)){H.set("centered",a7)}else{an.log("centering inside viewpoint ");H.set("centered",true)}H.set("constrain",true);H.show()},aZ=function(Y){if(H){H.hide()}},aw=function(){if((typeof google==="undefined")||!google.friendconnect){return}google.friendconnect.requestSignIn();return},o=function(){var a5,Y,a4=d("etag"),a6;if(a4){a6=d("qid");if(a6){Y=aM();a4=parseInt(a4,10);a5="q-"+a6+"_"+Y;an.StorageLite.setItem(a5,a4)}}},ap=function(){var a4,Y,a5,a6=an.StorageLite,a7=an.one(".qlist");if(!a7){an.log("1318 not on this page","warn");return}Y=a7.all(".qs");if(!Y||Y.size()===0){an.log("no divs .qs","warn");return}a4=aM();Y.each(function(){var bb,ba,a9,a8;bb=this.get("id");ba=this.getAttribute("lampcms:i_etag");a9=a6.getItem(bb+"_"+a4);if(a9){if(a9===ba){this.one("a.ql").addClass("read");a8=this.one("span.ru");if(a8){a8.removeClass("unread");a8.addClass("read");a8.setAttribute("lampcms:ttt","No Unread Items. Click to toggle status")}}}})},at=function(a6){var Y,a9,a5,a8,a4=aM(),a7;Y=(a6.test(".unread"))?"unread":"read";a8=a6.ancestor("div.qs");a9=a8.get("id");a7=a8.one("a.ql");a5=a8.getAttribute("lampcms:i_etag");a5=parseInt(a5,10);sKey=a9+"_"+a4;if("unread"===Y){a7.removeClass("unread").addClass("read");a6.removeClass("unread").addClass("read").setAttribute("lampcms:ttt","No Unread items. Click to toggle status");an.StorageLite.setItem(sKey,a5)}else{a7.removeClass("read").addClass("unread");a6.removeClass("read").addClass("unread").setAttribute("lampcms:ttt","Unread items. Click to toggle status");an.StorageLite.removeItem(sKey)}},v=function(Y){var a4,a5=Y.get("id");switch(true){case Y.test(".thumbupon"):Y.removeClass("thumbupon");Y.addClass("thumbup");break;case Y.test(".thumbup"):Y.removeClass("thumbup");Y.addClass("thumbupon");break;case Y.test(".thumbdownon"):Y.removeClass("thumbdownon");Y.addClass("thumbdown");break;case Y.test(".thumbdown"):Y.removeClass("thumbdown");Y.addClass("thumbdownon");break}if(aN(a5)){a4=an.io(Y.get("href"))}},a1=function(a5){var a6,a8,a7,Y,a4;a8=a5.ancestor("div");a7=a5.get("rev");a4='<iframe width="480" height="390" src="http://www.youtube.com/embed/'+a7+'?rel=0" frameborder="0" allowfullscreen></iframe>';a8.addClass("bg_black");a6=new an.Anim({node:a8,to:{width:480,height:390}});a6.set("duration",0.6);a6.set("easing",an.Easing.easeOut);a6.on("end",function(){a6.get("node").set("innerHTML",a4)});a6.run()},aF=function(a6){var a5,a4,Y,a7=a6.get("id");if(a6.test(".thumbupon")){return}a6.addClass("thumbupon");a7=a7.substr(7);a5=a6.ancestor("div");a4=a5.next(".c_likes");Y=a4.get("text");Y=(!Y)?0:parseInt(Y,10);a4.set("text",(Y+1));an.io("/index.php?a=likecomment&commentid="+a7)},l=function(){oSL.getQuickRegForm()},aD=function(a7){var a4,a6,a5,Y;if(typeof FB==="undefined"){return}a4=d("site_title");a6=d("site_url");a5=a7.get("title");Y=d("site_description");FB.ui({method:"stream.publish",message:"I joined this site with Facebook Connect button. You should check it out too",attachment:{name:a4,caption:Y,description:a5,href:a6},action_links:[{text:a4,href:a6}],user_message_prompt:"Invite your Facebook Friends to join this site"},function(a8){})},aj=function(a6){var a5,Y,a4=a6.currentTarget;a6.halt();Y={method:"POST",form:{id:a4,useDisabled:true}};L.hide();J();a5=an.io("/index.php",Y)},am=function(a8){var Y,a4,a6,a7,a5=a8.currentTarget;a8.halt();a8.preventDefault();Y=a5.one("textarea[name=com_body]");a7=Y.get("value").length;if(Y&&(a7<10)){alert("Comment must be at least 10 characters long");return}if(Y&&(a7>600)){alert("Comment must be at under 600 chars long. Please remove "+(a7-600)+" characters from your comment");return}a4={method:"POST",form:{id:a5,useDisabled:true}};if(L){L.hide()}J(a5.ancestor("div"));a6=an.io("/index.php",a4)},aH=function(ba){var a7,Y,bb,bc,a8,a6,a5,bd,a4=ba.currentTarget,a9=ba.target;an.log("el is "+a4+" id is: "+a4.get("id")+" target: "+a9+" tagName: "+a4.get("tagName"));Y=a4.get("id");switch(true){case a4.test(".qpages"):if("A"===ba.target.get("tagName")&&an.one(".paginated")){ba.halt();aY(ba.target)}break;case a4.test(".ext_api"):aV(a4);break;case a4.test("span.ru"):at(a4);break;case a4.test(".vote"):ba.halt();if(ax()){v(a4)}break;case a4.test(".c_like"):ba.halt();if(ax()){aF(a4)}break;case a4.test(".ytlink"):case a4.test(".ytplay"):ba.halt();a1(a4);break;case a4.test(".fbsignup"):j();break;case a4.test(".gfcsignin"):aw();break;case a4.test(".twsignin"):an.log("clicked on twsignin.");m.startDance();break;case a4.test(".add_tumblr"):an.log("clicked on .add_tumblr");m.startDance("/index.php?a=logintumblr",680,540);break;case a4.test(".add_linkedin"):an.log("clicked on .add_linkedin");m.startDance("/index.php?a=loginlinkedin",640,480);break;case a4.test(".add_blogger"):an.log("clicked on .add_blogger");m.startDance("/index.php?a=connectblogger",680,540);break;case a4.test(".inreply"):(function(){var bg,be,bf=a4.get("id");bf=bf.substr(8);an.log("id: "+bf);be=an.one("#comment-"+bf);bg=a4.ancestor("div.com_wrap");if(be){if(be.hasClass("parent_comment2")){be.removeClass("parent_comment2");be.removeClass("parent_comment");if(bg&&bg.hasClass("parent_comment2")){bg.removeClass("parent_comment2")}}else{be.addClass("parent_comment2");if(bg){bg.addClass("parent_comment2")}}}})();break;case (Y==="gfcset"):if((typeof google!=="undefined")&&google.friendconnect){google.friendconnect.requestSettings()}break;case (Y==="gfcinvite"):if((typeof google!=="undefined")&&google.friendconnect){google.friendconnect.requestInvite()}break;case (Y==="fbinvite"):aD(a4);break;case (Y==="twinvite"):oTweet=oSL.tweet.getInstance();oTweet.show();break;case (a4.test(".change_image")):if(an.one("#avatar_upload")){an.one("#avatar_upload").removeClass("pic_upload")}break;case (Y==="logout"):ba.preventDefault();ba.halt();J(a4);a5=d("fbappid");if((typeof FB!=="undefined")&&a5&&FB.getAuthResponse()){FB.logout(function(be){an.log("FB response "+an.dump(be));bd="fbsr_"+a5;an.log("removing fbcookie: "+bd);an.Cookie.remove(bd);an.log("FB Session after logout: "+an.dump(FB.getAuthResponse()),"warn");window.location.assign("/index.php?a=logout")})}else{window.location.assign("/index.php?a=logout")}break;case a4.test(".flag"):a7=a4.ancestor("div.controls");if(a7){a8=(a7.test(".question"))?"q":"a";a6=a7.get("id");a6=a6.substr(4)}else{a7=a4.ancestor("div.com_flag");if(a7){a8="c";a6=a4.get("id");a6=a6.substr(6)}}if(a7){T({rid:a6,rtype:a8})}break;case a4.test(".retag"):a7=a4.ancestor("div.controls");if(a7){a6=a7.get("id");a6=a6.substr(4);g(a6)}break;case a4.test(".sortans"):ba.halt();aW(a4);break;case a4.test(".stick"):window.location.assign("/index.php?a=stick&qid="+d("qid"));break;case a4.test(".unstick"):window.location.assign("/index.php?a=unstick&qid="+d("qid"));break;case a4.test(".close"):a7=a4.ancestor("div.controls");if(a7){a6=a7.get("id");a6=a6.substr(4);M(a6)}break;case a4.test(".del"):a7=a4.ancestor("div.controls");if(a7){a6=a7.get("id");a6=a6.substr(4);if(a7.test(".com_tools")){e(a6)}else{bc=(a7.test(".question"))?"q":"a";t({rid:a6,rtype:bc})}}break;case a4.test(".edit"):a7=a4.ancestor("div.controls");if(a7){ba.halt();ba.preventDefault();a6=a7.get("id");a6=a6.substr(4);if(a7.test(".com_tools")){if(!aC(a7)){alert("You cannot edit comments that are older than "+d("comments_timeout")+" minutes");return}else{r(a6)}}else{a8=(a7.test(".question"))?"q":"a";window.location.assign("/index.php?a=edit&rid="+a6+"&rtype="+a8)}}break;case a4.test(".com_link"):ba.preventDefault();S(a4);break;case a4.test(".com_reply_link"):ba.preventDefault();ao(a4);break;case a4.test(".btn_shred"):if(ax()){ak(a4.get("id"))}break;case a4.test(".btnfollow"):N(a4);break}},aY=function(a4){var Y,a5;a5=a4.ancestor("div.qpages");if(!a4.hasAttribute("href")){return}Y=a4.getAttribute("href");if(a5){J(a5);an.io(Y)}},aW=function(a7){var a5,Y,a6,a9=a7.get("id"),ba,a4=an.one("#qtypes"),a8=a7.ancestor("div").next("div.sortable")||an.one(".sortable");an.log("sortby: "+a9);if(a7.test(".qtype_current")){an.log("1818 Clicked on already current tab. No soup for you");return}Y=a7.ancestor("div").one(".qtype_current");an.log("curTab: "+Y);if(Y){a6=Y.get("id");an.log("1826 curTabId: "+a6);if(!I.hasOwnProperty(a6)){an.log("1828 adding current contents of .paginated to oCAnsers");an.log("1835 next sortable eTab: "+a8);I[a6]=a8.getContent();an.log("1838 oCTabs[curTabId] now: "+I[a6])}}a7.siblings().removeClass("qtype_current");a7.addClass("qtype_current");if(I.hasOwnProperty(a9)&&I[a9].length>0){an.log("1856 Youth gots it already");a8.setContent(I[a9]);aa.fetch()}else{J(a8);a5=a7.getAttribute("href");an.log("href: "+a5);a5=("#"===a5)?"/index.php?a=getanswers&qid="+d("qid")+"&sort="+a9:a5;an.io(a5,{"arguments":{sortby:a9}})}},N=function(a5){if(!ax()){return}a5.removeClass("unfollow");var a6,ba,bc,a4,a8,bb="q",a7="on",Y,a9={q:"question",u:"user",t:"tag"};a8=a5.getAttribute("lampcms:follow");bb=a5.getAttribute("lampcms:ftype");a6=an.one("#flwr_"+aM());if(a5.test(".following")){bc=an.one("#res_"+a8);if(bc){if(bc.test(".uid-"+aM())){if(!confirm("Are you sure you want to unfollow your own question?")){a5.one("span.icoc").removeClass("del").addClass("check");a5.one("span.flabel").set("text","Following");return}}}ba=(bb==="u")?"Follow":"Follow this "+a9[bb];a5.removeClass("following").addClass("follow");a5.set("title",ba);a5.one("span.icoc").removeClass("check").addClass("cplus");a5.one("span.flabel").set("text",ba);a7="off";if(a6){a6.hide("fadeOut")}}else{ba="You are following this "+a9[bb];a5.removeClass("follow").addClass("following");a5.set("title",ba);a5.one("span.icoc").removeClass("cplus").removeClass("del").addClass("check");a5.one("span.flabel").set("text","Following");a7="on";if(a6){a6.show("fadeIn")}}Y='<form name="form_f" action="/index.php"><input type="hidden" name="a" value="follow"><input type="hidden" name="ftype" value="'+bb+'"><input type="hidden" name="follow" value="'+a7+'"><input type="hidden" name="f" value="'+a8+'"><input type="hidden" name="token" value="'+aX()+'">';Y=an.one("body").appendChild(Y);cfg={method:"POST",form:{id:Y}};request=an.io("/index.php",cfg);return},q=function(a5){an.log("2133 hovering");var a6,a4,Y=a5.currentTarget;switch(true){case Y.test(".inreply"):a6=Y.get("id");a6=a6.substr(8);an.log("id: "+a6);if(an.one("#comment-"+a6)){an.one("#comment-"+a6).addClass("parent_comment")}break;case Y.test(".following"):if(!Y.hasClass("unfollow")){Y.addClass("unfollow");Y.one("span.icoc").removeClass("check").addClass("del");Y.one("span.flabel").set("text","Unfollow")}break}},k=function(a5){var a6,a4,Y=a5.currentTarget;switch(true){case Y.test(".inreply"):a6=Y.get("id");a6=a6.substr(8);an.log("id: "+a6);if(an.one("#comment-"+a6)){an.one("#comment-"+a6).removeClass("parent_comment")}break;case (Y.test(".following")):Y.removeClass("unfollow");Y.one("span.icoc").removeClass("dev").addClass("check");Y.one("span.flabel").set("text","Following");break}},aP=function(a4){var Y=(a4)?a4.all(".reveal"):an.all(".reveal");if(Y){Y.each(function(){if(this.test(".owner")){if(this.test(".oid-"+aM())){this.removeClass("hidden")}}else{this.removeClass("hidden")}})}},u=function(be,a4,a8){aZ();an.log("args from Y.io: "+an.dump(a8));var a5,a7,bd,bc,ba,a9,bb,Y=an.Lang.trim(a4.getResponseHeader("Content-Type"));if("text/json; charset=UTF-8"!==Y){alert("Invalid Content-Type header: "+Y);return}if(undefined===a4.responseText){alert("No text in response");return}try{a5=an.JSON.parse(a4.responseText)}catch(a6){alert("Error parsing response object"+a6+"<br>o.responseText: "+a4.responseText);return}if(a5.exception){if(a5.type&&"Lampcms\\MustLoginException"===a5.type){ax(true)}else{alert(a5.exception)}}if(a5.alert){alert(a5.alert)}if(a5.success){alert(a5.alert)}if(a5.replace&&a5.replace.target&&a5.replace.content){an.log("got something to replace in "+a5.replace.target);an.one("#"+a5.replace.target).set("innerHTML",a5.replace.content);aa.fetch();aR();aP()}if(a5.reload){if(a5.reload>0){an.later(a5.reload,this,function(){window.location.reload(true)})}else{window.location.reload(true)}}if(a5.formError){if(an.one(".form_error")){an.one(".form_error").set("innerHTML",a5.formError)}else{alert(a5.formError)}return}if(a5.formElementError){aJ(a5.formElementError);return}if(a5.setmeta&&a5.setmeta.key&&a5.setmeta.val){aU(a5.setmeta.key,a5.setmeta.val)}if(a5.paginated){bd=an.one(".paginated");if(bd){bd.setContent(a5.paginated);aa.fetch();aR();return}}if(a5.comment&&a5.comment.res&&a5.comment.html){an.log("got comment: "+an.dump(a5.comment));if(a5.comment.id&&an.one("#comment-"+a5.comment.id)){an.one("#comment-"+a5.comment.id).replace(a5.comment.html)}else{if(a5.comment.parent&&a5.comment.parent>0){if(an.one("#comm_wrap_"+a5.comment.parent)){an.one("#comm_wrap_"+a5.comment.parent).replace(a5.comment.html)}}else{an.one("#comm_wrap_"+a5.comment.res).remove();an.one("#comments-"+a5.comment.res).insert(a5.comment.html,an.one("#comments-"+a5.comment.res).one(".add_com"))}}return}if(a5.vote&&a5.vote.hasOwnProperty("v")&&a5.vote.rid){bc=an.one("#score"+a5.vote.rid);if(bc){bc.set("innerHTML",a5.vote.v)}}else{if(a5.redirect||a5.answer){an.StorageLite.removeItem(A());D();aO();if(a5.redirect){ab("<h3>Success</h3>").set("bodyContent",'Item saved! Redirecting to <br><a href="'+a5.redirect+'">'+a5.redirect+"</a>").show();an.later(1000,this,function(){window.location.assign(a5.redirect)})}if(an.one("#answers")){if(Q){Q.setEditorHTML("<br>")}an.one("#answers").append(a5.answer).scrollIntoView();if(typeof dp!=="undefined"){dp.SyntaxHighlighter.HighlightAll("code")}}}}},b=function(){var Y=an.one("#id_title");if(Y){an.StorageLite.setItem("title",Y.get("value"))}},ai=function(){var Y=an.one("#id_tags");if(Y){an.StorageLite.setItem("tags",Y.get("value"))}},D=function(){var Y=an.one("#id_title");if(Y){an.StorageLite.removeItem("title")}},aO=function(){var Y=an.one("#id_tags");if(Y){an.StorageLite.removeItem("nuts")}},aJ=function(a5){var a4,Y;for(a4 in a5){if(a5.hasOwnProperty(a4)){Y=(an.one("#"+a4+"_e"));if(Y){Y.set("text",a5[a4])}else{Y=an.one(".form_error");if(Y){Y.set("text",a5[a4])}}if(Y){Y.scrollIntoView()}else{alert(a5[a4])}}}},F=function(Y,a4){aZ();alert("Error occured. Server returned status "+a4.status+" response: "+a4.statusText)};an.on("io:success",u);an.on("io:failure",F);aT=function(a9){var a7,Y,a5,ba,a4,a8,a6=a9.currentTarget;ba=a6.one("#id_title");a4=a6.one("#id_tags");a8=a6.one("#id_reason");if(a8&&(1>a8.get("value").length)){alert("You must include reason for editing");a9.halt();return}a5=i();a5=a5.replace(/"codepreview"/g,'"code"');a6.one("textarea[name=qbody]").set("value",a5);Y={method:"POST",form:{id:a6,useDisabled:true}};if(an.one("#dostuff")&&an.one("#dostuff").ancestor("div")){J(an.one("#dostuff").ancestor("div"))}a7=an.io("/index.php",Y);a9.halt();return false};var a=function(){var Y={type:"separator"};if("1"==d("btn_yt")){Y={type:"push",label:"Insert YouTube Video",value:"insertmedia",id:"btn_youtube"}}return Y};var aB=function(){var Y={type:"separator"};if(typeof dp!=="undefined"){Y={group:"sourcecode",label:"Code style",buttons:[{type:"select",label:"Select",value:"codestyle",disabled:true,menu:[{text:"None",value:"nocode",checked:true},{text:"JavaScript",value:"javascript"},{text:"HTML/XML",value:"xml"},{text:"CSS",value:"css"},{text:"Python",value:"python"},{text:"Ruby",value:"ruby"},{text:"PHP",value:"php"},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"C#",value:"csharp"},{text:"Java",value:"java"},{text:"SQL",value:"sql"},{text:"VB",value:"vb"},{text:"Delphi",value:"delphi"}]}]}}return Y};var ag=function(){var a4,Y={type:"separator"};if(an.one("#id_qbody")&&an.all(".com_hand").isEmpty()){a4=aB();Q=new X.widget.Editor("id_qbody",{dompath:false,width:"660px",height:"140px",autoHeight:true,extracss:'pre { margin-left: 10px; margin-right: 10px; padding: 2px; background-color: #EEE; } a.ytplay{position: absolute; display: block; height: 44px; width: 44px; top: 23px; left: 38px;} .yui-media { height: 90px; width: 120px; border: 1px solid black; background-color: #f2f2f2; background-image: url( "/images/media.gif" ); background-position: 45% 45%; background-repeat: no-repeat; }  .ytvideo {border: 1px solid black; cursor: pointer; position: relative; clear: both; margin-bottom: 5px;}',animate:true,toolbar:{buttons:[{group:"saveclear",label:"Save / New",buttons:[{type:"push",label:"Save Draft",value:"save"},{type:"push",label:"New Document",value:"clear"}]},{group:"textstyle",label:"Font Style",buttons:[{type:"push",label:"Bold CTRL + SHIFT + B",value:"bold"},{type:"push",label:"Italic CTRL + SHIFT + I",value:"italic"},{type:"push",label:"Underline CTRL + SHIFT + U",value:"underline"},{type:"push",label:"Strike Through",value:"strikethrough"}]},Y,{group:"blockquote",label:"Quote",buttons:[{type:"push",label:"Indent",value:"indent",disabled:true},{type:"push",label:"Outdent",value:"outdent",disabled:true}]},Y,{group:"indentlist",label:"Lists",buttons:[{type:"push",label:"Create an Unordered List",value:"insertunorderedlist"},{type:"push",label:"Create an Ordered List",value:"insertorderedlist"}]},Y,a4,Y,{group:"insertitem",label:"Link / Image",buttons:[{type:"push",label:"HTML Link CTRL + SHIFT + L",value:"createlink",disabled:true},{type:"push",label:"Insert Image",value:"insertimage",disabled:false},a()]},Y,{group:"undoredo",label:"Undo/Redo",buttons:[{type:"push",label:"Undo",value:"undo",disabled:true},{type:"push",label:"Redo",value:"redo",disabled:true}]}]}});Q.filter_safari=function(a5){if(this.browser.webkit){a5=a5.replace(/<span class="Apple-tab-span" style="white-space:pre">([^>])<\/span>/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");a5=a5.replace(/Apple-style-span/gi,"");a5=a5.replace(/style="line-height: normal;"/gi,"");a5=a5.replace(/yui-wk-div/gi,"");a5=a5.replace(/yui-wk-p/gi,"");a5=a5.replace(/<li><\/li>/gi,"");a5=a5.replace(/<li> <\/li>/gi,"");a5=a5.replace(/<li>  <\/li>/gi,"");if(this.get("ptags")){a5=a5.replace(/<div([^>]*)>/g,"<p$1>");a5=a5.replace(/<\/div>/gi,"</p>")}}return a5};Q.on("windowinsertmediaClose",function(){aG.call(this)},Q,true);Q.cmd_insertmedia=function(){this.execCommand("insertimage","");var a5=this._swapEl(this.currentElement[0],"div",function(a6){a6.className="yui-media";X.util.Dom.setStyle(a6,"fontSize","100px")});this.currentElement=[a5];ay.call(this);return[false]};Q.on("toolbarLoaded",function(){an.log("2507 this is "+this,"warn");this.on("afterNodeChange",function(a8){var a7=this.toolbar.getButtonByValue("insertmedia"),a5=this.toolbar.getButtonByValue("codestyle");if(a5){if(this._hasSelection()){this.toolbar.enableButton(a5)}else{this.toolbar.disableButton(a5)}}if(a7){if(this._hasSelection()){this.toolbar.disableButton("insertmedia")}else{this.toolbar.enableButton("insertmedia");var a6=this._getSelectedElement();a6=new an.Node(a6);if(a6.hasClass("yui-media")){this.toolbar.selectButton("insertmedia")}else{this.toolbar.deselectButton("insertmedia")}}}aq()},this,true);Q.toolbar.on("insertmediaClick",function(){an.log("this is: "+this);var a5=Q._getSelectedElement();an.log("2618 el: "+a5);if(X.util.Dom.hasClass(a5,"yui-media")){Q.currentElement=[a5];ay.call(Q);return false}},this,true);this.on("editorKeyUp",function(){aq()});Q.toolbar.on("codestyleClick",function(a7){an.log("2606 codestyleClick","warn");var ba,a5,a8=this._getSelection(),bb,a6=Q._getSelectedElement(),a9=a7.button.value.toLowerCase();an.log("2613 sel: "+a8.toString(),"warn");ba=an.Escape.html(a8.toString());an.log("2619 escaped: "+ba,"warn");switch(true){case ("nocode"===a9&&Q._isElement(a6,"pre")):an.log("2641 element is turning to nocode ","warn");Q._swapEl(a6,"code");a5=Q.getEditorHTML();a5=a5.replace(/<code([^>]*)>/gi,"");a5=a5.replace(/<\/code>/gi,"");Q.setEditorHTML(a5);break;case (Q._isElement(a6,"pre")):an.log("2651 element is pre ","warn");a6.className=a9;break;default:an.log("2657 default - wrapping in pre tag ","warn");Q.execCommand("inserthtml",'<pre alt="codepreview" class="'+a9+'">'+ba+"</pre>")}return false},this,true);Q.toolbar.on("clearClick",function(){if(confirm("Are you sure you want to reset the Editor?")){Q.setEditorHTML("<br>");aS("Editor content cleared..")}});Q.toolbar.on("saveClick",a2)});Q.on("windowRender",function(){var a5=document.createElement("div");a5.innerHTML="<p>Paste Link to YouTube Video here:</p>";a5.innerHTML+='<p>Click "Share" button on YouTube Video page<br>then copy the link from there and paste it into this form</p>';a5.innerHTML+='<div id="media_control"><form>URL: <input id="embed_url" type="text" value="" size="30" style="font-size: 1.5em; padding: 2px;"></form></div>';a5.innerHTML+='<br><div id="media_cont" class="fl cb" style="margin-left: 35px;"><button id="btn_addvideo" type="button" style="padding: 4px; font-size: 1em; cursor: pointer;">Add YouTube Video</button></div><br>';a5.className="pad10";Q._windows.insertmedia={body:a5}});if(!an.one("#iedit")){an.later(5000,Q,function(){if(Q.editorDirty){Q.editorDirty=null;a2()}},{},true)}an.StorageLite.on("storage-lite:ready",function(){var a8,a7,a6,a5=an.one("#id_qbody");a6=an.StorageLite.getItem(A());if(a5&&!an.one("#iedit")&&null!==a6&&""!==a6){a5.set("value",a6);if(an.one("#id_title")){a8=an.StorageLite.getItem("title");a7=an.StorageLite.getItem("tags");if(a8){an.one("#id_title").set("value",a8)}if(a8){an.one("#id_tags").set("value",a7)}}aS("Loaded content draft from Local Storage")}else{aS("Editor ready")}Q.render()});i=function(){var a7,a8,a6,a5=Q.getEditorHTML();a5=Q.cleanHTML(a5);if(typeof dp!=="undefined"){a5=a5.replace(/alt="codepreview"/g,'rel="codepreview"');a6=document.createElement("div");a6.innerHTML=a5;a8=a6.getElementsByTagName("pre");for(a7=0;a7<a8.length;a7++){a8[a7].innerHTML="\n"+a8[a7].innerHTML.replace(/<br>/g,"\n")+"\n";a8[a7].innerHTML="\n"+a8[a7].innerHTML.replace(/&nbsp;/g," ")+"\n"}a5=a6.innerHTML;an.log("html after replacing: "+a5,"warn")}return a5};ad=an.one("#tmp_preview");aq=function(){ad=(ad)?ad:null;if(ad){ad.set("innerHTML",i())}if((typeof dp!=="undefined")&&dp.SyntaxHighlighter){dp.SyntaxHighlighter.HighlightAll("codepreview")}}}};T=function(a6){var Y,a4,a5="flagger";if(ax()){if(a6.rtype&&"c"===a6.rtype){a5="flagcomment"}a4='<div id="div_flag" style="text-align: left"><form name="form_flag" action="/index.php"><input type="hidden" name="a" value="'+a5+'"><input type="hidden" name="rid" value="{rid}"><input type="hidden" name="token" value="'+aX()+'"><input type="hidden" name="qid" value="'+d("qid")+'"><input type="hidden" name="rtype" value="{rtype}"><input type="radio" name="reason" value="spam"><label> Spam</label><br><input type="radio" name="reason" value="inappropriate"><label> Inappropriate</label><br><hr><label for="id_note">Comments?</label><textarea name="note" cols="40" rows="2" style="display: block;"></textarea><input type="submit" class="btn" value="Report"></form></div>';a4=an.Lang.sub(a4,a6);Y=ab("<h3>Report to moderator</h3>");Y.set("bodyContent",a4);Y.show()}};M=function(a5){var Y,a4;if(ax()){a4='<div style="text-align: left"><form name="form_close" id="id_close" action="/index.php"><input type="hidden" name="a" value="close"><input type="hidden" name="token" value="'+aX()+'"><input type="hidden" name="qid" value="'+a5+'"><input type="radio" name="reason" value="Not a question" checked><label>Not a real question</label><br><input type="radio" name="reason" value="Off topic"><label>Way off Topic</label><br><input type="radio" name="reason" value="Unproductive debate"><label>Turned into unproductive debate</label><br><input type="radio" name="reason" value="Duplicate"><label>Duplicate question</label><br><hr><label for="id_note">Comments?</label><textarea name="note" cols="40" rows="2" style="display: block;"></textarea><input type="submit" class="btn" value="Close this question"></form></div>';Y=ab("<h3>Close this question</h3>");Y.set("bodyContent",a4);Y.show()}};g=function(){var Y,a5,a4,a6="";if(ax()){a4=an.all("td.td_question > div.tgs a");a4.each(function(){a6+=this.get("text")+" "});a6=an.Lang.trimRight(a6);a5='<div id="div_flag" style="text-align: left"><form name="form_flag" id="id_flag" action="/index.php"><input type="hidden" name="a" value="retag"><input type="hidden" name="token" value="'+aX()+'"><input type="hidden" name="qid" value="'+d("qid")+'"><hr><label for="id_note">At least one tag, max 5 tags separated by spaces</label><input type="text" class="ta1" id="id_retag" size="40" name="tags" value="'+a6+'"></input><br><input type="submit" class="btn" value="Save"></form></div>';Y=ab("<h3>Edit Tags</h3>");Y.set("bodyContent",a5);W(an.one("#id_retag"));Y.show()}};var e=function(a7){var a8,a5,a6,Y,a4;if(confirm("Really delete this comment?")){a8=an.one("#comment-"+a7);if(a8){a6='<form name="form_del" action="/index.php"><input type="hidden" name="a" value="deletecomment"><input type="hidden" name="rid" value="'+a7+'"><input type="hidden" name="token" value="'+aX()+'">';a5=a8.appendChild(a6);Y={method:"POST",form:{id:a5,useDisabled:true}};a4=an.io("/index.php",Y);a8.hide("fadeOut");an.later(1000,a8,function(){a8.remove()})}}};t=function(a7){var a4,a5,a6="",Y="delete";if(ax()){if(a7.rtype&&"c"===a7.rtype){Y="deletecomment"}if(aQ()){a6='<br><input type="checkbox" name="ban"><label> Ban poster</label><br>'}a5='<div id="div_del" style="text-align: left"><form name="form_del" action="/index.php"><input type="hidden" name="a" value="'+Y+'"><input type="hidden" name="rid" value="{rid}"><input type="hidden" name="token" value="'+aX()+'"><input type="hidden" name="qid" value="'+d("qid")+'"><input type="hidden" name="rtype" value="{rtype}"><hr><label for="id_note">Reason for delete (optional)</label><textarea name="note" cols="40" rows="2" style="display: block;"></textarea>'+a6+'<br><input type="submit" class="btn" value="Delete"></form></div>';a5=an.Lang.sub(a5,a7);a4=ab("<h3>Delete item</h3>");a4.set("bodyContent",a5);a4.show()}};S=function(a5){var a8,Y,a6,a4,a7;a4=B();Y=aM();a8=d("min_com_pp");an.log("pp: "+a4+" minpp: "+a8);if(ax()){if(("1"===d("comment"))||(d("asker_id")==Y)||(a4>a8)||a5.test(".uid-"+Y)){a7=a5.get("id");a7=a7.substr(8);a6=an.one("#add-comment-"+a7);if(!a6){a6=an.Lang.sub(w,{extraClass:"",divID:a7,resID:a7,formID:a7,token:aX(),parentID:"0",comment:"comment",commentTip:ar});a5.insert(a6,"after")}else{if(a6._isHidden()){a6.show("fadeIn")}else{a6.hide("fadeOut",null,function(a9){an.log("3280 fadeout o is: "+a9+" this is: "+this,"warn")})}}}else{alert("You must have a profit point amount of at least <b>"+a8+"</b><br>to be able to add comments<br>Your current profit point amount is: <b>"+a4+"</b>");return}}};ao=function(a5){var ba,Y,a6,a4,a9,a8,a7;a4=B();Y=aM();an.log("3248 vid: "+Y);an.log("askerid: "+d("asker_id"));ba=d("min_com_pp");an.log("pp: "+a4+" minpp: "+ba);a8=a5.ancestor("div.com_wrap");an.log("parendDiv"+a8);a9=a8.ancestor("div.comments").get("id");an.log("3252 resID: "+a9);a9=a9.substr(9);an.log("3254 resID: "+a9);if(ax()){if(("1"===d("comment"))||(d("asker_id")==Y)||(a4>ba)||a5.test(".uid-"+Y)){a7=a5.get("id");an.log("3322 parentID: "+a7);a7=a7.substr(8);an.log("3259 parentID: "+a7);a6=an.one("#comm_wrap_"+a7);if(!a6){a6=an.Lang.sub(w,{extraClass:" com_wrap",divID:a7,resID:a9,formID:a7,token:aX(),comment:"reply",commentTip:ar,parentID:a7});a8.insert(a6,"after")}else{if(a6._isHidden()){a6.show("fadeIn")}else{a6.hide("fadeOut")}}}else{alert("You must have a profit point amount of at least <b>"+ba+"</b><br>to be able to add comments<br>Your current profit point amount is: <b>"+a4+"</b>");return}}};r=function(a7){var a6,a4,Y,a5;a4=an.one("#comment-"+a7);if(a4){Y=a4.one(".com_b");a5=Y.get("innerHTML");a5=f(a5);a6='<div id="comm_wrap_'+a7+'" class="fl cb"><form action="/index.php" id="edit-comment-'+a7+'" class="comform" method="post"><input type="hidden" name="a" value="editcomment"><input type="hidden" name="commentid" value="'+a7+'"><input type="hidden" name="token" value="'+aX()+'"><table class="cb fr tbl_comment"><tr><td width="60px" class="com_icons" valign="top"></td><td class="com_main"><textarea name="com_body" cols="60" rows="4" class="com_bo" style="display: block; padding: 2px;">'+a5+'</textarea></td><td class="com_button" valign="top"><input type="submit" name="doit" class="btn_comment" value="save"></td></tr>'+ar+"</table></form></div>";a4.insert(a6,"replace")}};ak=function(Y){var a4=Y.substr(5);form='<div id="div_del" style="text-align: left"><form name="form_shred" id="id_shred" action="/index.php"><input type="hidden" name="a" value="shred"><input type="hidden" name="uid" value="'+a4+'"><input type="hidden" name="token" value="'+aX()+'"><p>Shredding user will completely delete all posts made by the user<br>as well as all user tags<br>It will also change user status to *deleted*<br>and ban all IP addresses ever used by that user</p><p>Proceed only if you absolutely sure you want to do this<hr><input type="submit" class="btn_shred" value="Shred"></form></div>';oAlert=ab("<h3>Shred User</h3>");oAlert.set("bodyContent",form);oAlert.show()};aU=function(a5,a4){var Y=d(a5,true);if(Y&&a4){Y.set("content",a4)}};ax=function(a4){var Y;if(a4||!aK()){Y='<div class="larger"><p>You must login to perform this action</p><p>Please login or <a class="close" href="#" onClick=oSL.getQuickRegForm(); return false;>Click here to register</a></div>';ab("Please Login").set("bodyContent",Y).show();return false}return true};aX=function(){return d("version_id")};ah=function(Y){aU("version_id",Y)};aM=function(){var Y;if(null===K){Y=d("session_uid");K=(!Y)?0:parseInt(Y,10)}return K};aK=function(){var Y,a4=aM();Y=(a4&&(a4!=="")&&(a4!=="0"));return Y};aQ=function(){var Y;if(O<2){Y=d("role");if(Y&&(("administrator"===Y)||("moderator"===Y))){O=3}else{O=2}}return(3===O)};B=function(){var Y;if(!af){Y=d("pp");af=(!Y)?1:parseInt(Y,10)}return af};y=function(){var Y=an.all("div.controls");if(Y){Y.each(function(){if(this.test(".question")){if(aQ()||this.test(".uid-"+aM())||(500<B())){this.append(' <span class="ico retag ajax" title="Retag this item">retag</span>')}if(!an.one("#closed")&&(aQ()||this.test(".uid-"+aM()))){this.append(' <span class="ico close ajax"  title="Close this question">close</span>')}if("administrator"===d("role")){if(!this.test(".sticky")){this.append(' <span class="ico stick ajax"  title="Make sticky">stick</span>')}else{this.append(' <span title="Unstick" class="ico unstick ajax">unstick</span>')}}}if(aQ()||this.test(".uid-"+aM())||2000<B()){if(aQ()||this.test(".uid-"+aM())){this.append(' <span title="Delete "class="ico del ajax">delete</span>')}if(!this.test(".com_tools")||aC(this)){this.append(' <span  title="Edit" class="ico edit ajax">edit</span>')}}})}};aC=function(a4){var Y,a6,a5;if(aQ()){return true}a5=d("comments_timeout");if(!a5){return true}a5=a5*60000;Y=a4.one("div.com_ts").get("title");if(!Y){return true}Y=new Date(Y);a6=((new Date()).getTime()-Y.getTime());an.log("3042 timeDiff: "+a6);if(a6>a5){an.log("comment is older than maxDiff","warn");return false}an.log("Comment is editable");return true};j=function(){an.log("initFBSignup");var a4,Y;if(typeof FB!=="undefined"){Y=d("fbperms");if(!Y){Y=""}an.log("fbPerms: "+Y);if(aK()){a4=function(a5){an.log("Connecting Facebook account","warn");if(a5.authResponse){an.log("FB Signed in response: "+an.dump(a5));if(a5.status==="connected"){J(null,"Connecting<br>Facebook account");an.io("/index.php?a=connectfb")}else{an.log("No permissions from Facebook","error")}}}}else{an.log("before logging it to facebook");a4=function(a5){if(a5.authResponse&&a5.status==="connected"){an.log("FB Signed in response: "+an.dump(a5));window.top.location.reload(true)}else{an.log("Facebook login did not work","error")}}}FB.login(a4,{scope:Y});an.log("after login to facebook")}return};ab=function(Y){if(!L){L=new an.Overlay({srcNode:"#fbOverlay",width:"500px",height:"300px",zIndex:100,centered:true,constrain:true,render:true,visible:false,plugins:[{fn:an.Plugin.OverlayModal},{fn:an.Plugin.OverlayKeepaligned}]});an.one("#hide-fbOverlay").on("click",function(){L.hide()})}if(!Y){Y="Alert"}L.set("headerContent","<h3>"+Y+"</h3>");return L};d=function(a6,a4){var Y,a5;if(!ac[a6]){a5=an.one("meta[name="+a6+"]");ac[a6]=a5}if(!ac[a6]){return false}if(a4){return ac[a6]}Y=ac[a6].get("content");return Y};aV=function(Y){an.log("3126 is Checked: "+Y.get("checked"));if((Y.get("tagName")==="INPUT")&&Y.get("checked")){a2();switch(true){case ((Y.get("id")==="api_tweet")&&(!d("tw"))):m.startDance();break;case ((Y.get("id")==="api_facebook")&&("1"!==d("fb"))):j();break;case ((Y.get("id")==="api_tumblr")&&("1"!==d("tm"))):an.log("3222 api_tumblr");m.startDance("/index.php?a=logintumblr",800,540);break;case ((Y.get("id")==="api_linkedin")&&("1"!==d("linkedin"))):an.log("3879 api_linkedin");m.startDance("/index.php?a=loginlinkedin",640,480);break;case ((Y.get("id")==="api_blogger")&&("1"!==d("blgr"))):an.log("3227 api_blogger");m.startDance("/index.php?a=connectblogger",680,540);break}}};G=function(){var a4,Y=d("max_comments");if(Y&&0<parseInt(Y,10)){a4=an.all("div.nocomments");if(a4){a4.removeClass("nocomments")}}};m={popupWindow:null,oInterval:null,startDance:function(a6,a4,a8){J();var a5,ba,a9,Y,a7;a7=(a4)?a4:800;Y=(a8)?a8:800;a9="location=0,status=0,width="+a7+",height="+Y+",alwaysRaised=yes,modal=yes";a5=(!a6)?"http://"+window.location.hostname+"/index.php?a=logintwitter&ajaxid=1":a6;if(this.popupWindow&&!this.popupWindow.closed){this.popupWindow.location.href=a5;this.popupWindow.focus();aZ();return}this.popupWindow=window.open(a5,"twitterWindow",a9);aZ();if(!this.popupWindow){alert("Unable to open login window. Please make sure to disable popup blockers in your browser");return}if(this.oInterval){window.clearInterval(this.oInterval);this.oInterval=null}this.oInterval=window.setInterval(this.checkLogin,500)},checkLogin:function(){if(!m.popupWindow||m.popupWindow.closed){m.cancelIntervals();window.location.reload(true)}},cancelIntervals:function(){if(this.oInterval){window.clearInterval(this.oInterval);this.oInterval=null}},toString:function(){return"object Twitter"}};aR=function(){var Y=an.all(".ttt");if(Y&&Y.size()>0){if(p){p.destroy()}p=new X.widget.Tooltip("ttB",{context:Y._nodes,autodismissdelay:5500,width:"300px",hidedelay:350,xyoffset:[-10,-45],effect:{effect:X.widget.ContainerEffect.FADE,duration:0.2}})}};if(az&&az.size()>0){U=new X.widget.Tooltip("ttB2",{context:az._nodes,autodismissdelay:5500,hidedelay:350,xyoffset:[-10,-45],effect:{effect:X.widget.ContainerEffect.FADE,duration:0.2}})}aL=function(){var Y,a4;if("1"===d("noac")){return}Y=an.one("#id_q");a4=an.one("#id_title");if(Y){Y.plug(an.Plugin.AutoComplete,{minQueryLength:3,resultHighlighter:"wordMatch",resultListLocator:"ac",resultTextLocator:"title",source:"/index.php?a=titlehint&q={query}&ajaxid=1&callback={callback}"})}if(a4){a4.plug(an.Plugin.AutoComplete,{minQueryLength:3,resultHighlighter:"wordMatch",resultListLocator:"ac",resultTextLocator:"title",source:"/index.php?a=titlehint&q={query}&ajaxid=1&callback={callback}",resultFormatter:function(a6,a5){return an.Array.map(a5,function(a7){var a9='<a href="/q{_id}/{url}">{t}</a><br>{intro}<br><div class="c6">Asked {hts} (<span class="c_{status}">{i_ans} answer{ans_s})</span></div>';var a8=a7.raw;return an.Lang.sub(a9,{_id:a8._id,url:a8.url,intro:a8.intro,t:a7.highlighted,hts:a8.hts,i_ans:a8.i_ans,ans_s:a8.ans_s,status:a8.status})})}});a4.ac.on("select",function(a7){var a6,a5=a7.result;if(a5.raw&&a5.raw._id&&a5.raw.url){a7.preventDefault();a6="/q"+a5.raw._id+"/"+a5.raw.url;window.location.assign(a6)}})}};aR();ag();if(Q){}G();aP();ap();o();au=an.all(".com_hand");if(au&&!au.isEmpty()){au.on("focus",l)}var C=function(a4){var Y,a5=window.location.href;Y="/index.php?a=locale&locale="+a4.currentTarget.get("value")+"&redirect="+a5;window.location.assign(Y)};an.on("submit",aT,".qa_form");an.on("change",C,"#id_locale");if(an.hasOwnProperty("categoryEditor")){an.categoryEditor.Editor()}else{an.log("no cat editor here")}an.delegate("click",aH,"body",".ajax");an.one("body").delegate("hover",q,k,".mo");an.delegate("submit",aj,"#fbOverlay","form");an.delegate("submit",am,"#qview-body",".comform");an.delegate("click",function(){ab().hide()},"#fbOverlay","a.close");window.alert=function(a4){var Y=ab();Y.set("bodyContent",a4);Y.show()};if(an.one("#regdiv")){ae=an.Cookie.get("dnd");if(!ae){oSL.Regform.getInstance().show()}}aa=new an.ImgLoadGroup({foldDistance:2});aa.set("className","imgloader");aL();W();y();if(typeof dp!=="undefined"){dp.SyntaxHighlighter.HighlightAll("code")}});